(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{20:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(22),i=n.n(a),s=(n(20),n(19)),o=n(0),l=n(7),u=n.n(l),j=n(9),d=n(5),b=n(13),p="https://korhan-travel-log.herokuapp.com:1337";function h(){return O.apply(this,arguments)}function O(){return(O=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"/api/logs"),{headers:{"content-type":"application/json",Accept:"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return x.apply(this,arguments)}function x(){return(x=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"/api/logs"),{method:"POST",headers:{"content-type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=n(6),g=function(e){return Object(f.jsx)("div",{onClick:e.onClick?e.onClick:null,children:Object(f.jsx)("svg",{className:e.className,version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 512 512",children:Object(f.jsx)("g",{children:Object(f.jsx)("g",{children:Object(f.jsx)("path",{d:"M256,0C161.896,0,85.333,76.563,85.333,170.667c0,28.25,7.063,56.26,20.49,81.104L246.667,506.5\r c1.875,3.396,5.448,5.5,9.333,5.5s7.458-2.104,9.333-5.5l140.896-254.813c13.375-24.76,20.438-52.771,20.438-81.021\r C426.667,76.563,350.104,0,256,0z M256,256c-47.052,0-85.333-38.281-85.333-85.333c0-47.052,38.281-85.333,85.333-85.333\r s85.333,38.281,85.333,85.333C341.333,217.719,303.052,256,256,256z"})})})})})},v=n(24),y=function(e){var t=e.location,n=e.onClose,r=Object(c.useState)(!1),a=Object(d.a)(r,2),i=a[0],s=a[1],o=Object(c.useState)(""),l=Object(d.a)(o,2),b=l[0],p=l[1],h=Object(v.a)(),O=h.register,x=h.handleSubmit,g=function(){var e=Object(j.a)(u.a.mark((function e(c){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{s(!0),c.latitude=t.latitude,c.longitude=t.longitude,r=m(c),console.log(r),n()}catch(b){console.error(b),p(b.message),s(!1)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("form",{onSubmit:x(g),className:"entry-form",children:[b?Object(f.jsx)("h3",{className:"error",children:b}):null,Object(f.jsx)("label",{htmlFor:"title",children:"Title:"}),Object(f.jsx)("input",{name:"title",required:!0,ref:O}),Object(f.jsx)("label",{htmlFor:"comments",children:"Comment:"}),Object(f.jsx)("textarea",{name:"comments",rows:3,ref:O}),Object(f.jsx)("label",{htmlFor:"description",children:"Description:"}),Object(f.jsx)("textarea",{name:"description",rows:3,ref:O}),Object(f.jsx)("label",{htmlFor:"image",children:"Image:"}),Object(f.jsx)("input",{name:"image",ref:O}),Object(f.jsx)("label",{htmlFor:"visitDate",children:"Visit Date:"}),Object(f.jsx)("input",{name:"visitDate",type:"date",required:!0,ref:O}),Object(f.jsx)("button",{disabled:i,children:i?"Loading...":"Create Log Entry"})]})},k=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)({}),i=Object(d.a)(a,2),l=i[0],p=i[1],O=Object(c.useState)(null),m=Object(d.a)(O,2),x=m[0],v=m[1],k=Object(c.useState)({width:"100%",height:"100vh",latitude:37.6,longitude:-95.665,zoom:3}),w=Object(d.a)(k,2),C=w[0],S=w[1],N=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){N()}),[]);return Object(f.jsxs)(b.c,Object(s.a)(Object(s.a)({},C),{},{mapStyle:"mapbox://styles/mapbox/dark-v8",mapboxApiAccessToken:"pk.eyJ1Ijoia29yaGFuZWtlciIsImEiOiJja2Q0ZzVxbmkxd3NtMzFwZ2drOTF4cTZrIn0.zzALtDkmNWxqHSTvNRtFrg",onViewportChange:function(e){return S(e)},onDblClick:function(e){var t=Object(d.a)(e.lngLat,2),n=t[0],c=t[1];v({latitude:c,longitude:n})},doubleClickZoom:!1,children:[n.map((function(e){return Object(f.jsxs)(c.Fragment,{children:[Object(f.jsx)(b.a,{latitude:e.latitude,longitude:e.longitude,children:Object(f.jsx)(g,{className:"marker yellow",onClick:function(){return p(Object(o.a)({},e._id,!0))}})}),l[e._id]?Object(f.jsx)(b.b,{latitude:e.latitude,longitude:e.longitude,closeButton:!0,closeOnClick:!1,onClose:function(){return p({})},anchor:"top",children:Object(f.jsxs)("div",{className:"popup",children:[Object(f.jsx)("h3",{children:e.title}),Object(f.jsx)("p",{children:e.comments}),e.image?Object(f.jsx)("img",{className:"popup-img",src:e.image,alt:e.title}):null,Object(f.jsx)("p",{children:Object(f.jsxs)("small",{children:["Visited on ",new Date(e.visitDate).toLocaleDateString()]})})]})}):null]},e._id)})),x?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(b.a,{latitude:x.latitude,longitude:x.longitude,children:Object(f.jsx)(g,{className:"marker red"})}),Object(f.jsx)(b.b,{latitude:x.latitude,longitude:x.longitude,closeButton:!0,closeOnClick:!1,dynamicPosition:!0,onClose:function(){return v(null)},anchor:"top",children:Object(f.jsxs)("div",{className:"popup",children:[Object(f.jsx)("h3",{children:"Add your new log entry here"}),Object(f.jsx)(y,{onClose:function(){v(null),N()},location:x})]})})]}):null]}))};i.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(k,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.a8fa9a04.chunk.js.map